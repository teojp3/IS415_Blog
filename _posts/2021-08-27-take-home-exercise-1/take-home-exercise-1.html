<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>Take Home Exercise 1</title>

  <meta property="description" itemprop="description" content="Analysing and Visualising Spatio-temporal Patterns of COVID-19 in DKI Jakarta, Indonesia."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-09-09"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-09-09"/>
  <meta name="article:author" content="Teo Jun Peng"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Take Home Exercise 1"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Analysing and Visualising Spatio-temporal Patterns of COVID-19 in DKI Jakarta, Indonesia."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Take Home Exercise 1"/>
  <meta property="twitter:description" content="Analysing and Visualising Spatio-temporal Patterns of COVID-19 in DKI Jakarta, Indonesia."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Take Home Exercise 1"]},{"type":"character","attributes":{},"value":["Analysing and Visualising Spatio-temporal Patterns of COVID-19 in DKI Jakarta, Indonesia.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Teo Jun Peng"]},{"type":"character","attributes":{},"value":["https://teojp3-is415.netlify.app/"]}]}]},{"type":"character","attributes":{},"value":["09-09-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[2]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["df.jpg","dflist.jpg","distill-preview.png","finaldf.jpg","take-home-exercise-1_files/anchor-4.2.2/anchor.min.js","take-home-exercise-1_files/bowser-1.9.3/bowser.min.js","take-home-exercise-1_files/distill-2.2.21/template.v2.js","take-home-exercise-1_files/figure-html5/unnamed-chunk-43-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-44-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-45-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-46-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-47-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-48-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-49-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-50-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-51-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-52-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-53-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-54-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-55-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-56-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-57-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-58-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-59-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-60-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-61-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-62-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-63-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-64-1.png","take-home-exercise-1_files/header-attrs-2.10/header-attrs.js","take-home-exercise-1_files/jquery-1.11.3/jquery.min.js","take-home-exercise-1_files/popper-2.6.0/popper.min.js","take-home-exercise-1_files/tippy-6.2.7/tippy-bundle.umd.min.js","take-home-exercise-1_files/tippy-6.2.7/tippy-light-border.css","take-home-exercise-1_files/tippy-6.2.7/tippy.css","take-home-exercise-1_files/tippy-6.2.7/tippy.umd.min.js","take-home-exercise-1_files/webcomponents-2.0.0/webcomponents.js","THE1_workspace.Rdata"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="take-home-exercise-1_files/header-attrs-2.10/header-attrs.js"></script>
  <script src="take-home-exercise-1_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="take-home-exercise-1_files/popper-2.6.0/popper.min.js"></script>
  <link href="take-home-exercise-1_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="take-home-exercise-1_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="take-home-exercise-1_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="take-home-exercise-1_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="take-home-exercise-1_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="take-home-exercise-1_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="take-home-exercise-1_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Take Home Exercise 1","description":"Analysing and Visualising Spatio-temporal Patterns of COVID-19 in DKI Jakarta, Indonesia.","authors":[{"author":"Teo Jun Peng","authorURL":"https://teojp3-is415.netlify.app/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-09-09T00:00:00.000+08:00","citationText":"Peng, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Take Home Exercise 1</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Analysing and Visualising Spatio-temporal Patterns of COVID-19 in DKI Jakarta, Indonesia.</p></p>
</div>

<div class="d-byline">
  Teo Jun Peng <a href="https://teojp3-is415.netlify.app/" class="uri">https://teojp3-is415.netlify.app/</a> 
  
<br/>09-09-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction">1. Introduction</a>
<ul>
<li><a href="#the-data">1.1 The Data</a></li>
</ul></li>
<li><a href="#setting-up-the-environment">2. Setting up the environment</a></li>
<li><a href="#data-wrangling">3. Data Wrangling</a>
<ul>
<li><a href="#aspatial-data">3.1 Aspatial Data</a></li>
<li><a href="#geospatial-data">3.2 Geospatial Data</a></li>
<li><a href="#geospatial-data-integration">3.3 Geospatial Data Integration</a></li>
</ul></li>
<li><a href="#geospatial-analysis">4.Geospatial Analysis</a>
<ul>
<li><a href="#data-preparation-for-thematic-mapping">4.1 Data Preparation for Thematic Mapping</a></li>
<li><a href="#thematic-mapping">4.2 Thematic Mapping</a></li>
<li><a href="#normal-mainland-map">NORMAL MAINLAND MAP</a></li>
</ul></li>
<li><a href="#thematic-mapping-1">THEMATIC MAPPING</a>
<ul>
<li><a href="#boxbreaks-box-map">BOXBREAKS BOX MAP????</a></li>
</ul></li>
<li><a href="#relative-risk-either-no.-of-cases-or-population">Relative Risk, Either No. of Cases or Population</a></li>
<li><a href="#data-prepartion-for-relative-risk-mapping">Data Prepartion for Relative Risk Mapping</a></li>
</ul>
</nav>
</div>
<h1 id="introduction">1. Introduction</h1>
<p>This analysis aims to analyse and visualise spatio-temporal patterns of COVID-19 in DKI Jakarta, Indonesia. Out of 34 provinces in Indonesia, DKI Jakarta was the province affected most by the pandemic, with close to 24% of cumulative confirmed cases. However, the cumulative confirmed cases were not evenly distributed, therefore this analysis intends to unravel which sub-districts had the highest number of cases and how time has changed the overall distribution.</p>
<h2 id="the-data">1.1 The Data</h2>
<p>For this analysis, the following data are used:</p>
<ul>
<li><p><a href="https://riwayat-file-covid-19-dki-jakarta-jakartagis.hub.arcgis.com/">Open Data Covid-19 Provinsi DKI Jakarta</a>. This portal provides daily update of COVID-19 measures at both sub-district and district level. For the purpose of this analysis, data at the sub-district level is used. The datasets are in .CSV format, and monthly datasets from March 2020 to July 2021 will be used.</p></li>
<li><p><a href="https://www.indonesia-geospasial.com/">Indonesia Geospatial</a>. This portal provides a comprehensive collection of geospatial data mainly in ESRI shapefile format at different geographical levels. For the purpose of this analysis, the Shapefile (SHP) Batas Desa Provinsi DKI Jakarta provided at PODES 2019 geospatial layer is used.</p></li>
</ul>
<p><strong>P.S.</strong> <em>March 2020 Dataset only started from</em> <strong>25 March 2020</strong> <em>as per the source, so the dataset might not be a true representative of March 2020. Similarly for January 2021 Dataset,</em> <strong>30 January 2021</strong> <em>is the most updated data, the link to access 31 January 2021 is broken so this may not be a true representation of January 2021.</em></p>
<h1 id="setting-up-the-environment">2. Setting up the environment</h1>
<p>R packages will be used for efficiency and a more comprehensive analysis, such as <em>tidyverse</em> and <em>sf</em> etc.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/load.html'>load</a></span><span class='op'>(</span><span class='st'>"THE1_workspace.Rdata"</span><span class='op'>)</span>
<span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"tidyverse"</span>, <span class='st'>"sf"</span>, <span class='st'>"readxl"</span>, <span class='st'>"readr"</span>, <span class='st'>"stringr"</span>, <span class='st'>"tmap"</span>, <span class='st'>"lemon"</span>, <span class='st'>"formatR"</span><span class='op'>)</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
        <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
    <span class='op'>}</span>
    <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<h1 id="data-wrangling">3. Data Wrangling</h1>
<h2 id="aspatial-data">3.1 Aspatial Data</h2>
<h3 id="importing-and-creating-a-list">3.1.1 Importing and creating a list</h3>
<p><em>list.files</em> function helps to create a list from the imported data files. The files are also imported all at once using a pattern to match the file names, ensuring full efficiency as compared to importing the files individually.</p>
<p>The R function <em>lapply</em> is also complementary for this process, as well as adding the file names as an additional column to the dataframes (So as to display the data by month later on).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>file_list</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span>path <span class='op'>=</span> <span class='st'>"data/the1data/COVID-DATA"</span>, pattern <span class='op'>=</span> <span class='st'>"*.xlsx"</span>, full.names <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='va'>df_list</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>file_list</span><span class='op'>)</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/transform.html'>transform</a></span><span class='op'>(</span><span class='fu'>read_xlsx</span><span class='op'>(</span><span class='va'>file_list</span><span class='op'>[</span><span class='va'>x</span><span class='op'>]</span><span class='op'>)</span>,
    MonthYear <span class='op'>=</span> <span class='va'>file_list</span><span class='op'>[</span><span class='va'>x</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="looking-through-the-data-and-initial-data-cleaning">3.1.2 Looking through the data and initial data cleaning</h3>
<p>From here we then manually check through <em>df_list</em> to find which Meninggal column is the correct one for each file, for referencing the coalesce process later on in the next few steps (E.g. For February 2021, Meninggal…1 is the correct column to use since it is the Meninggal column with no NA values.)</p>
<p>The inspection tells us that <em>Meninggal…23 to Meninggal…25</em> is not used so we can skip those columns later on in the coalesce process.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df_list</span>
</code></pre>
</div>
</div>
<figure>
<img src="dflist.jpg" alt="Visualisation of df_list, where we checked through the correct Meninggal columns to use" /><figcaption aria-hidden="true">Visualisation of df_list, where we checked through the correct Meninggal columns to use</figcaption>
</figure>
<h3 id="combine-df_list-into-a-dataframe">3.1.3 Combine df_list into a dataframe</h3>
<p>We will then combine df_list into a real dataframe using <em>Idlpy</em> function from the <em>plyr</em> package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://had.co.nz/plyr'>plyr</a></span><span class='op'>)</span>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/plyr/man/ldply.html'>ldply</a></span><span class='op'>(</span><span class='va'>df_list</span>, <span class='va'>data.frame</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<figure>
<img src="df.jpg" alt="Visualisation of df dataframe" /><figcaption aria-hidden="true">Visualisation of df dataframe</figcaption>
</figure>
<h3 id="conversion-of-data-types-for-certain-columns">3.1.4 Conversion of data types for certain columns</h3>
<p>To combine/integrate values from the various <em>Meninggal</em> columns, we will have to convert <em>Meninggal…26</em> column’s data type so we can use coalesce function later on (because it originally is a <em>chr</em> type and <em>chr</em> type cannot combine with <em>double</em> type).</p>
<p>July 2020 is using <em>Meninggal…26</em> as the correct column, so we have to carry out the conversion.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df</span><span class='op'>$</span><span class='va'>Meninggal...26</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/double.html'>as.double</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>$</span><span class='va'>Meninggal...26</span><span class='op'>)</span>

<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='va'>df</span> <span class='op'>%&gt;%</span>
    <span class='fu'>na_if</span><span class='op'>(</span><span class='st'>"N/A"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="coalesce-process-for-namissing-values">3.1.5 Coalesce process for NA/missing values</h3>
<p>In this step we aim to combine <em>ID_KEL</em> into one main column, since some of the files have different layouts. Coalesce is a function to take in values from another column (So if ID_KEL has NA values while ID_KEL…1 has values, we will take from ID_KEL…1 and add them into ID_KEL)</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df</span> <span class='op'>&lt;-</span> <span class='va'>df</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://rdrr.io/pkg/plyr/man/mutate.html'>mutate</a></span><span class='op'>(</span>ID_KEL <span class='op'>=</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='va'>ID_KEL</span>, <span class='va'>ID_KEL...1</span>, <span class='va'>ID_KEL...2</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Similarly, we want to combine menninggal together as one column, since some of the files have different layout. We know that only 28,29,30,31 is used after checking the dataset earlier on during “df_list”, so we will only integrate those columns together.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df</span> <span class='op'>&lt;-</span> <span class='va'>df</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://rdrr.io/pkg/plyr/man/mutate.html'>mutate</a></span><span class='op'>(</span>Meninggal <span class='op'>=</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='va'>Meninggal</span>, <span class='va'>Meninggal...28</span>, <span class='va'>Meninggal...29</span>, <span class='va'>Meninggal...30</span>,
        <span class='va'>Meninggal...31</span>, <span class='va'>Meninggal...26</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="subsetting-the-necessary-columns-from-dataframe">3.1.6 Subsetting the necessary columns from dataframe</h3>
<p>Next, we will get only the required columns out from the dataframe.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>

<span class='va'>df2</span> <span class='op'>&lt;-</span> <span class='va'>df</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='st'>"MonthYear"</span>, <span class='st'>"ID_KEL"</span>, <span class='st'>"Nama_provinsi"</span>, <span class='st'>"nama_kota"</span>, <span class='st'>"nama_kecamatan"</span>,
        <span class='st'>"nama_kelurahan"</span>, <span class='st'>"POSITIF"</span>, <span class='st'>"Meninggal"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>So df2 is the modified dataframe, and currently this is the output. <em>lemon_print</em> is used for a more aesthetically pleasing dataframe.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>df2</span><span class='op'>)</span>
</code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-11">Table 1: </span>Modified dataframe df2 (Rendered with lemon_print)</caption>
<colgroup>
<col style="width: 51%" />
<col style="width: 6%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 4%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">MonthYear</th>
<th style="text-align: left;">ID_KEL</th>
<th style="text-align: left;">Nama_provinsi</th>
<th style="text-align: left;">nama_kota</th>
<th style="text-align: left;">nama_kecamatan</th>
<th style="text-align: left;">nama_kelurahan</th>
<th style="text-align: right;">POSITIF</th>
<th style="text-align: right;">Meninggal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">data/the1data/COVID-DATA/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">TOTAL</td>
<td style="text-align: right;">339735</td>
<td style="text-align: right;">5478</td>
</tr>
<tr class="even">
<td style="text-align: left;">data/the1data/COVID-DATA/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx</td>
<td style="text-align: left;">3172051003</td>
<td style="text-align: left;">DKI JAKARTA</td>
<td style="text-align: left;">JAKARTA UTARA</td>
<td style="text-align: left;">PADEMANGAN</td>
<td style="text-align: left;">ANCOL</td>
<td style="text-align: right;">834</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">data/the1data/COVID-DATA/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx</td>
<td style="text-align: left;">3173041007</td>
<td style="text-align: left;">DKI JAKARTA</td>
<td style="text-align: left;">JAKARTA BARAT</td>
<td style="text-align: left;">TAMBORA</td>
<td style="text-align: left;">ANGKE</td>
<td style="text-align: right;">617</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">data/the1data/COVID-DATA/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx</td>
<td style="text-align: left;">3175041005</td>
<td style="text-align: left;">DKI JAKARTA</td>
<td style="text-align: left;">JAKARTA TIMUR</td>
<td style="text-align: left;">KRAMAT JATI</td>
<td style="text-align: left;">BALE KAMBANG</td>
<td style="text-align: right;">755</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">data/the1data/COVID-DATA/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx</td>
<td style="text-align: left;">3175031003</td>
<td style="text-align: left;">DKI JAKARTA</td>
<td style="text-align: left;">JAKARTA TIMUR</td>
<td style="text-align: left;">JATINEGARA</td>
<td style="text-align: left;">BALI MESTER</td>
<td style="text-align: right;">358</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">data/the1data/COVID-DATA/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx</td>
<td style="text-align: left;">3175101006</td>
<td style="text-align: left;">DKI JAKARTA</td>
<td style="text-align: left;">JAKARTA TIMUR</td>
<td style="text-align: left;">CIPAYUNG</td>
<td style="text-align: left;">BAMBU APUS</td>
<td style="text-align: right;">870</td>
<td style="text-align: right;">13</td>
</tr>
</tbody>
</table>
</div>
<h3 id="cleaning-up-monthyear-column-so-as-to-sort-the-values-by-month">3.1.7 Cleaning up <em>MonthYear</em> column so as to sort the values by month</h3>
<p>As shown above, we need to clean up the <em>MonthYear</em> column as it is very messy. We will clean up the <em>MonthYear</em> column using <em>str_replace</em> function, to replace unnecessary characters in the values.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df2</span> <span class='op'>&lt;-</span> <span class='va'>df2</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate_all.html'>mutate_at</a></span><span class='op'>(</span><span class='st'>"MonthYear"</span>, <span class='va'>str_replace</span>, <span class='st'>"data/the1data/COVID-DATA/Standar Kelurahan Data Corona"</span>,
        <span class='st'>""</span><span class='op'>)</span>

<span class='va'>df2</span> <span class='op'>&lt;-</span> <span class='va'>df2</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate_all.html'>mutate_at</a></span><span class='op'>(</span><span class='st'>"MonthYear"</span>, <span class='va'>str_replace</span>, <span class='st'>"[(]"</span>, <span class='st'>""</span><span class='op'>)</span>

<span class='va'>df2</span> <span class='op'>&lt;-</span> <span class='va'>df2</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate_all.html'>mutate_at</a></span><span class='op'>(</span><span class='st'>"MonthYear"</span>, <span class='va'>str_replace</span>, <span class='st'>"[)]"</span>, <span class='st'>""</span><span class='op'>)</span>

<span class='va'>df2</span> <span class='op'>&lt;-</span> <span class='va'>df2</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate_all.html'>mutate_at</a></span><span class='op'>(</span><span class='st'>"MonthYear"</span>, <span class='va'>str_replace</span>, <span class='st'>".xlsx"</span>, <span class='st'>""</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>We will then turn MonthYear column into <em>date</em> data type using <em>Sys.setlocale</em> and <em>as.Date</em> functions.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/locales.html'>Sys.setlocale</a></span><span class='op'>(</span>locale <span class='op'>=</span> <span class='st'>"ind"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;LC_COLLATE=Indonesian_Indonesia.1252;LC_CTYPE=Indonesian_Indonesia.1252;LC_MONETARY=Indonesian_Indonesia.1252;LC_NUMERIC=C;LC_TIME=Indonesian_Indonesia.1252&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df2</span><span class='op'>$</span><span class='va'>MonthYear</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>df2</span><span class='op'>$</span><span class='va'>MonthYear</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>df2</span><span class='op'>$</span><span class='va'>MonthYear</span>, format <span class='op'>=</span> <span class='st'>"%d %B %Y"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Next, deleting away wrong/unnecessary rows (NA values in <em>ID_KEL</em>, subdistrict name as rows in <em>ID_KEL</em> column etc).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df2</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>df2</span><span class='op'>$</span><span class='va'>ID_KEL</span><span class='op'>)</span>, <span class='op'>]</span>

<span class='va'>df2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>df2</span>, <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grepl</a></span><span class='op'>(</span><span class='st'>"^\\d+$"</span>, <span class='va'>df2</span><span class='op'>$</span><span class='va'>ID_KEL</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Sorting the modified dataframe by <em>MonthYear</em> and resetting of index.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df2</span> <span class='op'>&lt;-</span> <span class='va'>df2</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='va'>df2</span><span class='op'>$</span><span class='va'>MonthYear</span><span class='op'>)</span>, <span class='op'>]</span>
<span class='va'>final_df</span> <span class='op'>&lt;-</span> <span class='va'>df2</span>
<span class='fu'><a href='https://rdrr.io/r/base/row.names.html'>row.names</a></span><span class='op'>(</span><span class='va'>final_df</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>final_df</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<figure>
<img src="finaldf.jpg" alt="Visualisation of final_df, with the modified MonthYear column and index reset" /><figcaption aria-hidden="true">Visualisation of final_df, with the modified MonthYear column and index reset</figcaption>
</figure>
<h3 id="exporting-.rds-files-out-from-the-final-dataframe">3.1.8 Exporting <em>.rds</em> files out from the final dataframe</h3>
<p>With all the data cleaning done, we will end out with writing out a .rds file from <em>final_df</em> and utilising it further on in the analysis, so as to ensure minimum data storage space.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>aspatial_df</span> <span class='op'>&lt;-</span> <span class='fu'>write_rds</span><span class='op'>(</span><span class='va'>final_df</span>, <span class='st'>"data/the1data/rds/aspatial_df.rds"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>aspatial_df</span> <span class='op'>&lt;-</span> <span class='fu'>read_rds</span><span class='op'>(</span><span class='st'>"data/the1data/rds/aspatial_df.rds"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="geospatial-data">3.2 Geospatial Data</h2>
<h3 id="importing-shapefile-data-into-a-simple-feature-dataframe">3.2.1 Importing shapefile data into a simple feature dataframe</h3>
<p>The following code cunk imports the <em>DKI Jakarta</em> geospatial data into R as a simple feature dataframe.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>geospatial_df</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/the1data/BATAS DESA DESEMBER 2019 DUKCAPIL DKI JAKARTA"</span>,
    layer <span class='op'>=</span> <span class='st'>"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA&#39; from data source `C:\teojp3\IS415_blog\data\the1data\BATAS DESA DESEMBER 2019 DUKCAPIL DKI JAKARTA&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 269 features and 161 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 106.3831 ymin: -6.370815 xmax: 106.9728 ymax: -5.184322
Geodetic CRS:  WGS 84</code></pre>
</div>
<h3 id="checking-and-ensuring-projected-coordinates-systems-of-the-data-is-correct">3.2.2 Checking and ensuring Projected Coordinates Systems of the data is correct</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>geospatial_df</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS[&quot;WGS 84&quot;,
    DATUM[&quot;World Geodetic System 1984&quot;,
        ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
            LENGTHUNIT[&quot;metre&quot;,1]]],
    PRIMEM[&quot;Greenwich&quot;,0,
        ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS[&quot;latitude&quot;,north,
            ORDER[1],
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
        AXIS[&quot;longitude&quot;,east,
            ORDER[2],
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
    ID[&quot;EPSG&quot;,4326]]</code></pre>
</div>
<p>From the above output, we see that the Projected Coordinates System is WGS84 which is <strong>wrong</strong>, therefore we’ll Change the Projected Coordinates Systems to DGN95 (which is the national Projected Coordinates Systems of Indonesia).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>jakarta_DGN95</span> <span class='op'>&lt;-</span> <span class='fu'>st_transform</span><span class='op'>(</span><span class='va'>geospatial_df</span>, <span class='fl'>23845</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="excluding-the-outer-islands-from-the-sf-dataframe">3.2.3 Excluding the outer islands from the sf dataframe</h3>
<p>Outer Islands are also known as <strong>Kepulauan Seribu</strong>, we will exclude them as they are detached from the mainland.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>jakarta_DGN95</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>jakarta_DGN95</span>, <span class='va'>KAB_KOTA</span> <span class='op'>!=</span> <span class='st'>"KEPULAUAN SERIBU"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="subsetting-necessary-columns-from-the-sf-dataframe">3.2.4 Subsetting necessary columns from the sf dataframe</h3>
<p>For the analysis, we will only keep the first nine fields, whereby the last field is JUMLAH_PEN (Total Population).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>jakarta_DGN95</span> <span class='op'>&lt;-</span> <span class='va'>jakarta_DGN95</span><span class='op'>[</span>, <span class='fl'>0</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<h3 id="data-cleaning-and-amended-some-inaccuracies-between-the-datasets">3.2.5 Data cleaning and amended some inaccuracies between the datasets</h3>
<p>Some inaccuracies in the data were discovered between identification keys from aspatial and geospatial after manually checking through their data. Therefore, necessary amendments were made to the data.</p>
<p>If data cleaning process is not done, there will be data missing from some states (Plotted maps will have missing values).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"BALEKAMBANG"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"BALE KAMBANG"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"HALIM PERDANA KUSUMA"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"HALIM PERDANA KUSUMAH"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"JATIPULO"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"JATI PULO"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"KALIBARU"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"KALI BARU"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"KRAMATJATI"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"KRAMAT JATI"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"PALMERIAM"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"PAL MERIAM"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"PINANGRANTI"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"PINANG RANTI"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"PAL MERAH"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"PALMERAH"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"TENGAH"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"KAMPUNG TENGAH"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"PULOGADUNG"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"PULO GADUNG"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"KALI DERES"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"KALIDERES"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"RAWAJATI"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"RAWA JATI"</span>
<span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>[</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA</span> <span class='op'>==</span> <span class='st'>"KRENDANG"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"KERENDANG"</span>
</code></pre>
</div>
</div>
<p>Function to help us check if the identifier keys between the aspatial and geospatial data are correct.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>aspatial_df</span><span class='op'>$</span><span class='va'>nama_kelurahan</span><span class='op'>)</span>
<span class='va'>b</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>jakarta_DGN95</span><span class='op'>$</span><span class='va'>DESA_KELUR</span><span class='op'>)</span>

<span class='va'>a</span><span class='op'>[</span><span class='op'>!</span><span class='op'>(</span><span class='va'>a</span> <span class='op'>%in%</span> <span class='va'>b</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<h3 id="removing-na-value-rows-from-dataframe">3.2.6 Removing NA value rows from dataframe</h3>
<p>We will drop NA value rows, as they will only affect our analysis results.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>jakarta_DGN95</span> <span class='op'>&lt;-</span> <span class='va'>jakarta_DGN95</span> <span class='op'>%&gt;%</span>
    <span class='fu'>drop_na</span><span class='op'>(</span><span class='va'>OBJECT_ID</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="geospatial-data-integration">3.3 Geospatial Data Integration</h2>
<h3 id="data-preparation-for-cumulative-case-rate-by-month-per-10000-population">3.3.1 Data preparation for <em>Cumulative Case Rate</em> by month (per 10,000 Population)</h3>
<p>Functions from various packages will be used: e.g. <em>pivot_wider()</em> of <strong>tidyr</strong> package and <em>group_by</em> of <strong>dplyr</strong> package.</p>
<p>The formula we are using is:</p>
<pre><code>COVID-19 Cases Rate per 10,000 population (Monthly) = (Total Cumulative Cases / Total Population) x 10000</code></pre>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Case_Rate</span> <span class='op'>&lt;-</span> <span class='va'>aspatial_df</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>inner_join</a></span><span class='op'>(</span><span class='va'>jakarta_DGN95</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>nama_kelurahan <span class='op'>=</span> <span class='st'>"DESA_KELUR"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>nama_kelurahan</span>, <span class='va'>MonthYear</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>Covid_Cases_Per_10000_Pop <span class='op'>=</span> <span class='op'>(</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>POSITIF</span><span class='op'>)</span><span class='op'>/</span><span class='va'>JUMLAH_PEN</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>10000</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'>pivot_wider</span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='va'>MonthYear</span>, values_from <span class='op'>=</span> <span class='va'>Covid_Cases_Per_10000_Pop</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="data-preparation-for-cumulative-death-rate-by-month-per-10000-population">3.3.2 Data preparation for <em>Cumulative Death Rate</em> by month (per 10,000 Population)</h3>
<p>Functions from various packages will be used: e.g. <em>pivot_wider()</em> of <strong>tidyr</strong> package and <em>group_by</em> of <strong>dplyr</strong> package.</p>
<p>The formula we are using is:</p>
<pre><code>COVID-19 Death Rate per 10,000 population (Monthly) = (Total Cumulative Deaths / Total Population) x 10000</code></pre>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Death_Rate</span> <span class='op'>&lt;-</span> <span class='va'>aspatial_df</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>inner_join</a></span><span class='op'>(</span><span class='va'>jakarta_DGN95</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>nama_kelurahan <span class='op'>=</span> <span class='st'>"DESA_KELUR"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>nama_kelurahan</span>, <span class='va'>MonthYear</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>Death_Rate_Per_10000 <span class='op'>=</span> <span class='op'>(</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>Meninggal</span><span class='op'>)</span><span class='op'>/</span><span class='va'>JUMLAH_PEN</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>10000</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'>pivot_wider</span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='va'>MonthYear</span>, values_from <span class='op'>=</span> <span class='va'>Death_Rate_Per_10000</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="data-preparation-for-relative-risk-mapping-with-regards-to-cumulative-death-rate">3.3.3 Data Preparation for <em>Relative Risk</em> mapping (with regards to Cumulative Death Rate)</h3>
<p>Preparing another dataframe <em>Positive_Cases</em> to join <em>Death_Rate</em> dataframe in the upcoming processes, to add the additional columns needed for relative risk mapping later on (E.g. POSITIF and Meninggal).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Positive_Cases</span> <span class='op'>&lt;-</span> <span class='va'>aspatial_df</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='st'>"MonthYear"</span>, <span class='st'>"nama_kelurahan"</span>, <span class='st'>"POSITIF"</span>, <span class='st'>"Meninggal"</span><span class='op'>)</span>

<span class='va'>Positive_Cases</span> <span class='op'>&lt;-</span> <span class='va'>Positive_Cases</span><span class='op'>[</span><span class='va'>Positive_Cases</span><span class='op'>$</span><span class='va'>MonthYear</span> <span class='op'>==</span> <span class='st'>"2021-07-31"</span>, <span class='op'>]</span>
</code></pre>
</div>
</div>
<p><em>Positive_Cases</em> dataframe will now be integrated within <em>Death_Rate</em> dataframe.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Death_Rate</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join</a></span><span class='op'>(</span><span class='va'>Positive_Cases</span>, <span class='va'>Death_Rate</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>nama_kelurahan <span class='op'>=</span> <span class='st'>"nama_kelurahan"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>Death_Rate</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>Death_Rate</span>, select <span class='op'>=</span> <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>MonthYear</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="renaming-the-columns-for-both-dataframes-for-easier-identification-during-analysis">3.3.4 Renaming the columns for both dataframes for easier identification during analysis</h3>
<p>The columns will be renamed and simplified for easier identification, such as removing Date value from the MonthYear values (e.g. “2021-02-28” into “02-2021”).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>Case_Rate</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"SUB_DISTRICT"</span>, <span class='st'>"03-2020"</span>, <span class='st'>"04-2020"</span>, <span class='st'>"05-2020"</span>, <span class='st'>"06-2020"</span>,
    <span class='st'>"07-2020"</span>, <span class='st'>"08-2020"</span>, <span class='st'>"09-2020"</span>, <span class='st'>"10-2020"</span>, <span class='st'>"11-2020"</span>, <span class='st'>"12-2020"</span>, <span class='st'>"01-2021"</span>,
    <span class='st'>"02-2021"</span>, <span class='st'>"03-2021"</span>, <span class='st'>"04-2021"</span>, <span class='st'>"05-2021"</span>, <span class='st'>"06-2021"</span>, <span class='st'>"07-2021"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>Death_Rate</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"SUB_DISTRICT"</span>, <span class='st'>"POSITIVE_CASES"</span>, <span class='st'>"DEATHS"</span>, <span class='st'>"03-2020"</span>,
    <span class='st'>"04-2020"</span>, <span class='st'>"05-2020"</span>, <span class='st'>"06-2020"</span>, <span class='st'>"07-2020"</span>, <span class='st'>"08-2020"</span>, <span class='st'>"09-2020"</span>, <span class='st'>"10-2020"</span>,
    <span class='st'>"11-2020"</span>, <span class='st'>"12-2020"</span>, <span class='st'>"01-2021"</span>, <span class='st'>"02-2021"</span>, <span class='st'>"03-2021"</span>, <span class='st'>"04-2021"</span>, <span class='st'>"05-2021"</span>,
    <span class='st'>"06-2021"</span>, <span class='st'>"07-2021"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="additional-data-cleaning-to-ensure-cleaned-data-is-used-for-analysis">3.3.5 Additional data cleaning to ensure cleaned data is used for analysis</h3>
<p>A code to quickly check and ensure there are no NA values.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Case_Rate</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>Case_Rate</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>!=</span> <span class='fl'>0</span>, <span class='op'>]</span>
</code></pre>
</div>
</div>
<p><em>Death_Rate</em> dataframe is found to have NA rows, therefore we deleted them using <em>na.omit()</em> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Death_Rate</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>Death_Rate</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>!=</span> <span class='fl'>0</span>, <span class='op'>]</span>

<span class='va'>Death_Rate</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>Death_Rate</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="exporting-.rds-files-and-using-them-for-efficient-data-storage">3.3.6 Exporting <em>.rds</em> files and using them for efficient data storage</h3>
<p>Rds files are used as a form of best practice, so as to lessen the amount of data storage for the required data.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Case_Rate_rds</span> <span class='op'>&lt;-</span> <span class='fu'>write_rds</span><span class='op'>(</span><span class='va'>Case_Rate</span>, <span class='st'>"data/the1data/rds/Case_Rate_rds.rds"</span><span class='op'>)</span>
<span class='va'>Death_Rate_rds</span> <span class='op'>&lt;-</span> <span class='fu'>write_rds</span><span class='op'>(</span><span class='va'>Death_Rate</span>, <span class='st'>"data/the1data/rds/Death_Rate_rds.rds"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Case_Rate_rds</span> <span class='op'>&lt;-</span> <span class='fu'>read_rds</span><span class='op'>(</span><span class='st'>"data/the1data/rds/Case_Rate_rds.rds"</span><span class='op'>)</span>
<span class='va'>Death_Rate_rds</span> <span class='op'>&lt;-</span> <span class='fu'>read_rds</span><span class='op'>(</span><span class='st'>"data/the1data/rds/Death_Rate_rds.rds"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="geospatial-analysis">4.Geospatial Analysis</h1>
<h2 id="data-preparation-for-thematic-mapping">4.1 Data Preparation for Thematic Mapping</h2>
<h3 id="joining-geospatial-data-jakarta_dgn95-with-aspatial-data-case-rate-and-death-rate">4.1.1 Joining Geospatial data (jakarta_DGN95) with Aspatial data (Case Rate and Death Rate)</h3>
<p><em>left_join</em> of <strong>dplyr</strong> is used to join the geospatial data and attributes from the aspatial data using the names of sub-districts as a common identifier (“DESA_KELUR for jakarta_DGN95, and”SUB_DISTRICT" for Case/Death_Rate_rds)</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Case_Rate_Final</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join</a></span><span class='op'>(</span><span class='va'>jakarta_DGN95</span>, <span class='va'>Case_Rate_rds</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>DESA_KELUR <span class='op'>=</span> <span class='st'>"SUB_DISTRICT"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>Death_Rate_Final</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join</a></span><span class='op'>(</span><span class='va'>jakarta_DGN95</span>, <span class='va'>Death_Rate_rds</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>DESA_KELUR <span class='op'>=</span> <span class='st'>"SUB_DISTRICT"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="checking-for-na-rows-in-the-combined-dataframes">4.1.2 Checking for NA rows in the combined dataframes</h3>
<p>Once again, checking for NA rows to ensure substantial analysis results will be attained.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Case_Rate_Final</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>Case_Rate_Final</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>!=</span> <span class='fl'>0</span>, <span class='op'>]</span>
</code></pre>
</div>
<pre><code>Simple feature collection with 0 features and 26 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Projected CRS: DGN95 / Indonesia TM-3 zone 54.1
 [1] OBJECT_ID  KODE_DESA  DESA       KODE       PROVINSI   KAB_KOTA  
 [7] KECAMATAN  DESA_KELUR JUMLAH_PEN 03-2020    04-2020    05-2020   
[13] 06-2020    07-2020    08-2020    09-2020    10-2020    11-2020   
[19] 12-2020    01-2021    02-2021    03-2021    04-2021    05-2021   
[25] 06-2021    07-2021    geometry  
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Death_Rate_Final</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>Death_Rate_Final</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>!=</span> <span class='fl'>0</span>, <span class='op'>]</span>
</code></pre>
</div>
<pre><code>Simple feature collection with 0 features and 28 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Projected CRS: DGN95 / Indonesia TM-3 zone 54.1
 [1] OBJECT_ID      KODE_DESA      DESA           KODE          
 [5] PROVINSI       KAB_KOTA       KECAMATAN      DESA_KELUR    
 [9] JUMLAH_PEN     POSITIVE_CASES DEATHS         03-2020       
[13] 04-2020        05-2020        06-2020        07-2020       
[17] 08-2020        09-2020        10-2020        11-2020       
[21] 12-2020        01-2021        02-2021        03-2021       
[25] 04-2021        05-2021        06-2021        07-2021       
[29] geometry      
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
<h2 id="thematic-mapping">4.2 Thematic Mapping</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='cn'>FALSE</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
</div>
<h3 id="small-multiples-choropleth-maps-to-see-the-distribution-of-covid-cases-and-deaths-march-2020-first-month">4.2.1 Small multiples choropleth maps to see the distribution of COVID Cases and Deaths: <strong>March 2020</strong> (First Month)</h3>
<p>Plotting small multiples choropleth maps using <em>KAB_KOTA</em> field (KAB = District Level, Kota = Subdistrict). So March 2020 is the first month that we have data on. From the plotted map, we can see that there is an even distribution throughout the different districts (no particular district with outlandish number of cases). But if we were strict, Jakarta Pusat and Jakarta Selatan has slightly more cases than the other districts.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Case_Rate_Final</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_fill</span><span class='op'>(</span><span class='st'>"03-2020"</span>, style <span class='op'>=</span> <span class='st'>"jenks"</span>, palette <span class='op'>=</span> <span class='st'>"Blues"</span>,
    thres.poly <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_facets</span><span class='op'>(</span>by <span class='op'>=</span> <span class='st'>"KAB_KOTA"</span>, free.coords <span class='op'>=</span> <span class='cn'>TRUE</span>, drop.shapes <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>tm_layout</span><span class='op'>(</span>legend.show <span class='op'>=</span> <span class='cn'>TRUE</span>, main.title <span class='op'>=</span> <span class='st'>"Distribution of cumulative confirmed Case\nRate per 10,000 Population (March 2020)"</span>,
        main.title.position <span class='op'>=</span> <span class='st'>"centre"</span>, title.size <span class='op'>=</span> <span class='fl'>12</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_borders</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-44-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<p>Similar to case rate, we can see that there is a seemingly even distribution throughout the different districts (no particular district with outlandish number of cases). Jakarta Pusat and Jakarta Selatan has slightly more death cases than the other districts as well.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Death_Rate_Final</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_fill</span><span class='op'>(</span><span class='st'>"03-2020"</span>, style <span class='op'>=</span> <span class='st'>"jenks"</span>, palette <span class='op'>=</span> <span class='st'>"Greens"</span>,
    thres.poly <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_facets</span><span class='op'>(</span>by <span class='op'>=</span> <span class='st'>"KAB_KOTA"</span>, free.coords <span class='op'>=</span> <span class='cn'>TRUE</span>, drop.shapes <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>tm_layout</span><span class='op'>(</span>legend.show <span class='op'>=</span> <span class='cn'>TRUE</span>, main.title <span class='op'>=</span> <span class='st'>"Distribution of cumulative Death Rate\nper 10,000 Population (March 2020)"</span>,
        main.title.position <span class='op'>=</span> <span class='st'>"centre"</span>, title.size <span class='op'>=</span> <span class='fl'>12</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_borders</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-45-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<h3 id="small-multiples-choropleth-maps-to-see-the-distribution-of-covid-cases-and-deaths-july-2021-last-month">4.2.2 Small multiples choropleth maps to see the distribution of COVID Cases and Deaths: <strong>July 2021</strong> (Last Month)</h3>
<h2 id="normal-mainland-map">NORMAL MAINLAND MAP</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Case_Rate_Final</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_fill</span><span class='op'>(</span><span class='st'>"03-2020"</span>, breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span>, <span class='fl'>13</span>, <span class='fl'>53</span>, <span class='fl'>119</span>, <span class='fl'>270</span>,
    <span class='fl'>395</span>, <span class='fl'>3808</span><span class='op'>)</span>, palette <span class='op'>=</span> <span class='st'>"Reds"</span>, title <span class='op'>=</span> <span class='st'>"Cumulative Case Rate"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_layout</span><span class='op'>(</span>main.title <span class='op'>=</span> <span class='st'>"Cumulative Confirmed Case Rate in March 2020"</span>,
    main.title.position <span class='op'>=</span> <span class='st'>"center"</span>, main.title.size <span class='op'>=</span> <span class='fl'>1.2</span>, legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>,
    legend.height <span class='op'>=</span> <span class='fl'>0.45</span>, legend.width <span class='op'>=</span> <span class='fl'>0.35</span>, frame <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_borders</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>tm_compass</span><span class='op'>(</span>type <span class='op'>=</span> <span class='st'>"8star"</span>, size <span class='op'>=</span> <span class='fl'>2</span>, position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"left"</span>, <span class='st'>"bottom"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_scale_bar</span><span class='op'>(</span>position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"left"</span>,
    <span class='st'>"bottom"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_grid</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.2</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-46-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<h3 id="time-series-choropleth-map-of-positive-cases-throughout-march-2020-to-july-2021">4.2.3 Time-series choropleth map of <em>Positive Cases</em> throughout March 2020 to July 2021</h3>
<p>To find the minimum and highest value from Case_Rate_Final “07-2021” (AKA column with the most updated number of cumulative positive cases).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Case_Rate_Final</span><span class='op'>$</span><span class='va'>`07-2021`</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  187.3   545.1   658.3   705.3   779.7  3808.3 </code></pre>
</div>
<p>Plotting small multiple maps to see how the distribution of COVID cases has changed on a monthly basis from March 2020 to July 2021.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Case_Rate_Final</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_polygons</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"03-2020"</span>, <span class='st'>"04-2020"</span>, <span class='st'>"05-2020"</span>, <span class='st'>"06-2020"</span>,
    <span class='st'>"07-2020"</span>, <span class='st'>"08-2020"</span>, <span class='st'>"09-2020"</span>, <span class='st'>"10-2020"</span>, <span class='st'>"11-2020"</span>, <span class='st'>"12-2020"</span>, <span class='st'>"01-2021"</span>,
    <span class='st'>"02-2021"</span>, <span class='st'>"03-2021"</span>, <span class='st'>"04-2021"</span>, <span class='st'>"05-2021"</span>, <span class='st'>"06-2021"</span>, <span class='st'>"07-2021"</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,
    <span class='fl'>500</span>, <span class='fl'>1000</span>, <span class='fl'>1500</span>, <span class='fl'>2000</span>, <span class='fl'>2500</span>, <span class='fl'>3000</span><span class='op'>)</span>, palette <span class='op'>=</span> <span class='st'>"Reds"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_layout</span><span class='op'>(</span>panel.show <span class='op'>=</span> <span class='cn'>TRUE</span>,
    panel.labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"03-2020"</span>, <span class='st'>"04-2020"</span>, <span class='st'>"05-2020"</span>, <span class='st'>"06-2020"</span>, <span class='st'>"07-2020"</span>, <span class='st'>"08-2020"</span>,
        <span class='st'>"09-2020"</span>, <span class='st'>"10-2020"</span>, <span class='st'>"11-2020"</span>, <span class='st'>"12-2020"</span>, <span class='st'>"01-2021"</span>, <span class='st'>"02-2021"</span>, <span class='st'>"03-2021"</span>,
        <span class='st'>"04-2021"</span>, <span class='st'>"05-2021"</span>, <span class='st'>"06-2021"</span>, <span class='st'>"07-2021"</span><span class='op'>)</span>, panel.label.size <span class='op'>=</span> <span class='fl'>3</span>, asp <span class='op'>=</span> <span class='cn'>NA</span>,
    legend.show <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-48-1.png" width="1440" style="display: block; margin: auto;" /></p>
</div>
<p>Similar to the above visualisation, but with an estimated 5-month change in time period (Splitting the 17 months into 4 parts, which equals ~5) to see how the distribution of COVID cases has changed from March 2020 to July 2021.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Case_Rate_Final</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_polygons</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"03-2020"</span>, <span class='st'>"08-2020"</span>, <span class='st'>"02-2021"</span>, <span class='st'>"07-2021"</span><span class='op'>)</span>,
    breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>500</span>, <span class='fl'>1000</span>, <span class='fl'>1500</span>, <span class='fl'>2000</span>, <span class='fl'>2500</span>, <span class='fl'>3000</span><span class='op'>)</span>, palette <span class='op'>=</span> <span class='st'>"Reds"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_layout</span><span class='op'>(</span>panel.show <span class='op'>=</span> <span class='cn'>TRUE</span>,
    panel.labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"03-2020"</span>, <span class='st'>"08-2020"</span>, <span class='st'>"02-2021"</span>, <span class='st'>"07-2021"</span><span class='op'>)</span>, panel.label.size <span class='op'>=</span> <span class='fl'>3</span>,
    asp <span class='op'>=</span> <span class='cn'>NA</span>, legend.show <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-49-1.png" width="1440" style="display: block; margin: auto;" /></p>
</div>
<h3 id="x-analysing-the-change-in-distribution-of-death-cases-throughout-march-2020-to-july-2021">4.2.X Analysing the change in distribution of <em>Death Cases</em> throughout March 2020 to July 2021</h3>
<p>To find the minimum and highest value from Death_Rate_Final “07-2021” (AKA column with the most updated number of cumulative death cases).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Death_Rate_Final</span><span class='op'>$</span><span class='va'>`07-2021`</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  3.439   8.446  10.298  10.602  12.508  42.098 </code></pre>
</div>
<p>Plotting small multiple maps to see how the distribution of deaths has changed on a monthly basis from March 2020 to July 2021.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Death_Rate_Final</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_polygons</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"03-2020"</span>, <span class='st'>"04-2020"</span>, <span class='st'>"05-2020"</span>, <span class='st'>"06-2020"</span>,
    <span class='st'>"07-2020"</span>, <span class='st'>"08-2020"</span>, <span class='st'>"09-2020"</span>, <span class='st'>"10-2020"</span>, <span class='st'>"11-2020"</span>, <span class='st'>"12-2020"</span>, <span class='st'>"01-2021"</span>,
    <span class='st'>"02-2021"</span>, <span class='st'>"03-2021"</span>, <span class='st'>"04-2021"</span>, <span class='st'>"05-2021"</span>, <span class='st'>"06-2021"</span>, <span class='st'>"07-2021"</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,
    <span class='fl'>5</span>, <span class='fl'>10</span>, <span class='fl'>15</span>, <span class='fl'>20</span>, <span class='fl'>25</span>, <span class='fl'>30</span>, <span class='fl'>35</span>, <span class='fl'>40</span><span class='op'>)</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_layout</span><span class='op'>(</span>panel.show <span class='op'>=</span> <span class='cn'>TRUE</span>,
    panel.labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"03-2020"</span>, <span class='st'>"04-2020"</span>, <span class='st'>"05-2020"</span>, <span class='st'>"06-2020"</span>, <span class='st'>"07-2020"</span>, <span class='st'>"08-2020"</span>,
        <span class='st'>"09-2020"</span>, <span class='st'>"10-2020"</span>, <span class='st'>"11-2020"</span>, <span class='st'>"12-2020"</span>, <span class='st'>"01-2021"</span>, <span class='st'>"02-2021"</span>, <span class='st'>"03-2021"</span>,
        <span class='st'>"04-2021"</span>, <span class='st'>"05-2021"</span>, <span class='st'>"06-2021"</span>, <span class='st'>"07-2021"</span><span class='op'>)</span>, panel.label.size <span class='op'>=</span> <span class='fl'>3</span>, asp <span class='op'>=</span> <span class='cn'>NA</span>,
    legend.show <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-51-1.png" width="1440" style="display: block; margin: auto;" /></p>
</div>
<p>Similar to the above visualisation, but with an estimated 5-month change in time period (Splitting the 17 months into 4 parts, which equals ~5) to see how the distribution of deaths from COVID has changed from March 2020 to July 2021.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Death_Rate_Final</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_polygons</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"03-2020"</span>, <span class='st'>"08-2020"</span>, <span class='st'>"02-2021"</span>, <span class='st'>"07-2021"</span><span class='op'>)</span>,
    breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>5</span>, <span class='fl'>10</span>, <span class='fl'>15</span>, <span class='fl'>20</span>, <span class='fl'>25</span>, <span class='fl'>30</span>, <span class='fl'>35</span>, <span class='fl'>40</span><span class='op'>)</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_layout</span><span class='op'>(</span>panel.show <span class='op'>=</span> <span class='cn'>TRUE</span>,
    panel.labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"03-2020"</span>, <span class='st'>"08-2020"</span>, <span class='st'>"02-2021"</span>, <span class='st'>"07-2021"</span><span class='op'>)</span>, panel.label.size <span class='op'>=</span> <span class='fl'>3</span>,
    legend.show <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-52-1.png" width="1440" style="display: block; margin: auto;" /></p>
</div>
<h1 id="thematic-mapping-1">THEMATIC MAPPING</h1>
<p>PERCENTILE MAP????</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>percent</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0.01</span>, <span class='fl'>0.1</span>, <span class='fl'>0.5</span>, <span class='fl'>0.9</span>, <span class='fl'>0.99</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>var</span> <span class='op'>&lt;-</span> <span class='va'>Case_Rate_Final</span><span class='op'>[</span><span class='st'>"07-2021"</span><span class='op'>]</span> <span class='op'>%&gt;%</span>
    <span class='fu'>st_set_geometry</span><span class='op'>(</span><span class='cn'>NULL</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>var</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span>, <span class='va'>percent</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>       0%        1%       10%       50%       90%       99%      100% 
 187.3189  286.2999  458.1759  658.3395  939.6568 1966.0003 3808.2902 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>get.var</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>vname</span>, <span class='va'>df</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='va'>v</span> <span class='op'>&lt;-</span> <span class='va'>df</span><span class='op'>[</span><span class='va'>vname</span><span class='op'>]</span> <span class='op'>%&gt;%</span>
        <span class='fu'>st_set_geometry</span><span class='op'>(</span><span class='cn'>NULL</span><span class='op'>)</span>
    <span class='va'>v</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/unname.html'>unname</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>percent</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0.01</span>, <span class='fl'>0.1</span>, <span class='fl'>0.5</span>, <span class='fl'>0.9</span>, <span class='fl'>0.99</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>var</span> <span class='op'>&lt;-</span> <span class='fu'>get.var</span><span class='op'>(</span><span class='st'>"07-2021"</span>, <span class='va'>Case_Rate_Final</span><span class='op'>)</span>
<span class='va'>bperc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>var</span>, <span class='va'>percent</span><span class='op'>)</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>jakarta_DGN95</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_polygons</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Case_Rate_Final</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_fill</span><span class='op'>(</span><span class='st'>"07-2021"</span>,
    title <span class='op'>=</span> <span class='st'>"07-2021"</span>, breaks <span class='op'>=</span> <span class='va'>bperc</span>, palette <span class='op'>=</span> <span class='st'>"Blues"</span>, labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"&lt; 1%"</span>, <span class='st'>"1% - 10%"</span>,
        <span class='st'>"10% - 50%"</span>, <span class='st'>"50% - 90%"</span>, <span class='st'>"90% - 99%"</span>, <span class='st'>"&gt; 99%"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_borders</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_layout</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Percentile Map"</span>,
    title.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-55-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>percentmap</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>vnam</span>, <span class='va'>df</span>, <span class='va'>legtitle</span> <span class='op'>=</span> <span class='cn'>NA</span>, <span class='va'>mtitle</span> <span class='op'>=</span> <span class='st'>"Percentile Map"</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='va'>percent</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0.01</span>, <span class='fl'>0.1</span>, <span class='fl'>0.5</span>, <span class='fl'>0.9</span>, <span class='fl'>0.99</span>, <span class='fl'>1</span><span class='op'>)</span>
    <span class='va'>var</span> <span class='op'>&lt;-</span> <span class='fu'>get.var</span><span class='op'>(</span><span class='va'>vnam</span>, <span class='va'>df</span><span class='op'>)</span>
    <span class='va'>bperc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>var</span>, <span class='va'>percent</span><span class='op'>)</span>
    <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>jakarta_DGN95</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_polygons</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_fill</span><span class='op'>(</span><span class='va'>vnam</span>, title <span class='op'>=</span> <span class='va'>legtitle</span>,
        breaks <span class='op'>=</span> <span class='va'>bperc</span>, palette <span class='op'>=</span> <span class='st'>"Blues"</span>, labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"&lt; 1%"</span>, <span class='st'>"1% - 10%"</span>, <span class='st'>"10% - 50%"</span>,
            <span class='st'>"50% - 90%"</span>, <span class='st'>"90% - 99%"</span>, <span class='st'>"&gt; 99%"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_borders</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_layout</span><span class='op'>(</span>main.title <span class='op'>=</span> <span class='st'>"Cumulative Confirmed Case Rate in July 2021"</span>,
        main.title.position <span class='op'>=</span> <span class='st'>"center"</span>, main.title.size <span class='op'>=</span> <span class='fl'>1.2</span>, legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>,
        legend.height <span class='op'>=</span> <span class='fl'>0.45</span>, legend.width <span class='op'>=</span> <span class='fl'>0.35</span>, frame <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_compass</span><span class='op'>(</span>type <span class='op'>=</span> <span class='st'>"8star"</span>,
        size <span class='op'>=</span> <span class='fl'>2</span>, position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"left"</span>, <span class='st'>"bottom"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_scale_bar</span><span class='op'>(</span>position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"left"</span>,
        <span class='st'>"bottom"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>CR_July2021_percentmap</span> <span class='op'>&lt;-</span> <span class='fu'>percentmap</span><span class='op'>(</span><span class='st'>"07-2021"</span>, <span class='va'>Case_Rate_Final</span><span class='op'>)</span>
<span class='va'>CR_March2020_percentmap</span> <span class='op'>&lt;-</span> <span class='fu'>percentmap</span><span class='op'>(</span><span class='st'>"03-2020"</span>, <span class='va'>Case_Rate_Final</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>CR_March2020_percentmap</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-58-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<h2 id="boxbreaks-box-map">BOXBREAKS BOX MAP????</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>boxbreaks</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>v</span>, <span class='va'>mult</span> <span class='op'>=</span> <span class='fl'>1.5</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='va'>qv</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/unname.html'>unname</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span><span class='op'>)</span>
    <span class='va'>iqr</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>4</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span>
    <span class='va'>upfence</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>4</span><span class='op'>]</span> <span class='op'>+</span> <span class='va'>mult</span> <span class='op'>*</span> <span class='va'>iqr</span>
    <span class='va'>lofence</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>mult</span> <span class='op'>*</span> <span class='va'>iqr</span>
    <span class='co'># initialize break points vector</span>
    <span class='va'>bb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/vector.html'>vector</a></span><span class='op'>(</span>mode <span class='op'>=</span> <span class='st'>"numeric"</span>, length <span class='op'>=</span> <span class='fl'>7</span><span class='op'>)</span>
    <span class='co'># logic for lower and upper fences no lower outliers</span>
    <span class='kw'>if</span> <span class='op'>(</span><span class='va'>lofence</span> <span class='op'>&lt;</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>{</span>
        <span class='va'>bb</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>lofence</span>
        <span class='va'>bb</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>floor</a></span><span class='op'>(</span><span class='va'>qv</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
    <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span>
        <span class='va'>bb</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>lofence</span>
        <span class='va'>bb</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>
    <span class='op'>}</span>
    <span class='kw'>if</span> <span class='op'>(</span><span class='va'>upfence</span> <span class='op'>&gt;</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>{</span>
        <span class='co'># no upper outliers</span>
        <span class='va'>bb</span><span class='op'>[</span><span class='fl'>7</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>upfence</span>
        <span class='va'>bb</span><span class='op'>[</span><span class='fl'>6</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>ceiling</a></span><span class='op'>(</span><span class='va'>qv</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>)</span>
    <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span>
        <span class='va'>bb</span><span class='op'>[</span><span class='fl'>6</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>upfence</span>
        <span class='va'>bb</span><span class='op'>[</span><span class='fl'>7</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>]</span>
    <span class='op'>}</span>
    <span class='va'>bb</span><span class='op'>[</span><span class='fl'>3</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span>
    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>bb</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>get.var</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>vname</span>, <span class='va'>df</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='va'>v</span> <span class='op'>&lt;-</span> <span class='va'>df</span><span class='op'>[</span><span class='va'>vname</span><span class='op'>]</span> <span class='op'>%&gt;%</span>
        <span class='fu'>st_set_geometry</span><span class='op'>(</span><span class='cn'>NULL</span><span class='op'>)</span>
    <span class='va'>v</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/unname.html'>unname</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>July2021_No_Zero</span> <span class='op'>&lt;-</span> <span class='va'>Case_Rate_Final</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='st'>"07-2021"</span> <span class='op'>&gt;=</span> <span class='fl'>0</span><span class='op'>)</span>
<span class='va'>var</span> <span class='op'>&lt;-</span> <span class='fu'>get.var</span><span class='op'>(</span><span class='st'>"07-2021"</span>, <span class='va'>Case_Rate_Final</span><span class='op'>)</span>
<span class='fu'>boxbreaks</span><span class='op'>(</span><span class='va'>var</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1]  187.3189  193.3497  545.1432  658.3395  779.6722 1131.4658
[7] 3808.2902</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>boxmap</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>vnam</span>, <span class='va'>df</span>, <span class='va'>legtitle</span> <span class='op'>=</span> <span class='cn'>NA</span>, <span class='va'>mtitle</span> <span class='op'>=</span> <span class='st'>"Box Map"</span>, <span class='va'>mult</span> <span class='op'>=</span> <span class='fl'>1.5</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='va'>var</span> <span class='op'>&lt;-</span> <span class='fu'>get.var</span><span class='op'>(</span><span class='va'>vnam</span>, <span class='va'>df</span><span class='op'>)</span>
    <span class='va'>bb</span> <span class='op'>&lt;-</span> <span class='fu'>boxbreaks</span><span class='op'>(</span><span class='va'>var</span><span class='op'>)</span>
    <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_fill</span><span class='op'>(</span><span class='va'>vnam</span>, title <span class='op'>=</span> <span class='va'>legtitle</span>, breaks <span class='op'>=</span> <span class='va'>bb</span>, palette <span class='op'>=</span> <span class='st'>"Blues"</span>,
        labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"lower outlier"</span>, <span class='st'>"&lt; 25%"</span>, <span class='st'>"25% - 50%"</span>, <span class='st'>"50% - 75%"</span>, <span class='st'>"&gt; 75%"</span>, <span class='st'>"upper outlier"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
        <span class='fu'>tm_borders</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_layout</span><span class='op'>(</span>main.title <span class='op'>=</span> <span class='st'>"Cumulative Confirmed Case Rate in July 2021"</span>,
        main.title.position <span class='op'>=</span> <span class='st'>"center"</span>, main.title.size <span class='op'>=</span> <span class='fl'>1.2</span>, legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>,
        legend.height <span class='op'>=</span> <span class='fl'>0.45</span>, legend.width <span class='op'>=</span> <span class='fl'>0.35</span>, frame <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_compass</span><span class='op'>(</span>type <span class='op'>=</span> <span class='st'>"8star"</span>,
        size <span class='op'>=</span> <span class='fl'>2</span>, position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"left"</span>, <span class='st'>"bottom"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>tm_scale_bar</span><span class='op'>(</span>position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"left"</span>,
        <span class='st'>"bottom"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>boxmap</span><span class='op'>(</span><span class='st'>"07-2021"</span>, <span class='va'>Case_Rate_Final</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-63-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<h1 id="relative-risk-either-no.-of-cases-or-population">Relative Risk, Either No. of Cases or Population</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Death_Rate_Final</span> <span class='op'>&lt;-</span> <span class='va'>Death_Rate_Final</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>EXPECTED_DEATH <span class='op'>=</span> <span class='op'>(</span><span class='va'>POSITIVE_CASES</span> <span class='op'>*</span> <span class='va'>`07-2021`</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>10000</span><span class='op'>)</span>

<span class='va'>Death_Rate_Final</span> <span class='op'>&lt;-</span> <span class='va'>Death_Rate_Final</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>SMR <span class='op'>=</span> <span class='va'>DEATHS</span><span class='op'>/</span><span class='va'>EXPECTED_DEATH</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="data-prepartion-for-relative-risk-mapping">Data Prepartion for Relative Risk Mapping</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Jakarta_Death_Final &lt;- Jakarta_Death_Final %&gt;%</span>
<span class='co'># group_by('Expected_Death',Sub_District) %&gt;% dplyr::summarise(`SMR` =</span>
<span class='co'># (Death)/(Expected_Death)) %&gt;% ungroup() Jakarta_Death_Final &lt;-</span>
<span class='co'># Jakarta_Death_Final %&gt;% group_by(Sub_District,SMR) %&gt;%</span>
<span class='co'># dplyr::summarise(`SMR_Avg` = sum(SMR)/15)</span>
</code></pre>
</div>
</div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
